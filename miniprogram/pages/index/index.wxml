<!--pages/recordService/record.wxml-->
<edit-record-modal show="{{showModalDialog}}" data-index="{{index}}" record='{{record}}' bind:onDelete='onDelete'>
</edit-record-modal>

<view class="custom-navbar color-accent" wx:if="{{true}}" style="position: {{fixed}};">
  <view class="content-area">
    <view class="icon-area">
      <picker id="childPicker" mode="selector" style="width: fit-content; height:fit-content;" range='{{childs}}' range-key="name" bind:change='onChildChange' value='{{value}}' wx:if="{{childs.length>=0}}" disabled="{{!childs||(childs.length==0)}}" bind:tap="onChildPickerTap">
        <view style="display: flex;">
          <view style="display: flex;align-items: center;">
            <image style="width: 50rpx; height: 50rpx;" src="../../images/group-btn.svg" mode="scaleToFill" />
          </view>
          <view style="margin-left: 10rpx;display: flex; flex-direction: column; align-items: center;justify-content: center;height: 100rpx;">
            <text style="font-size: 30rpx; color:#666666; width: 100%; height: fit-content; text-align: center;">{{selectChild.name?selectChild.name:''}}</text>
          </view>
        </view>
      </picker>
    </view>
  </view>
</view>

<view class="header">
  <view class="header-scroll">
    <view class="date-btn" bind:tap="onDateAdd" data-diff="-1">
      <image src="../../images/date-arrow-right.svg" class="date-arrow rotate-180" mode="scaleToFill" />
    </view>
    <view class="date">
      <picker class="picker" name="day" mode="date" model:value="{{day}}" bindchange="onDateChange" end='{{endDay}}'> {{day}} 周{{week}} </picker>
    </view>
    <view class="date-btn" bind:tap="onDateAdd" data-diff="1">
      <image src="../../images/date-arrow-right.svg" class="date-arrow" mode="scaleToFill" style="opacity: {{opacity}};" />
    </view>
  </view>
</view>


<view class="body">
  <view class="empty-container" wx:if="{{!records||records.length==0}}">
    <view style="display: flex; flex-direction: column; align-items: center;">
      <image class="empty-img" src="../../images/empty-1.svg" mode="scaleToFill" />
      <text style="font-size: 30rpx ; color: #ffffff;">快开始记录吧~</text>
    </view>
  </view>


  <view class="record-row" wx:key="item" wx:for="{{records}}">

    <view class="record-row-flex">
      <swipe-item-view width='710rpx' height='100%' x='{{item.x}}' bind:expand='onExpand' data-index="{{index}}" bind:collapse='onCollapse' bind:onDelete='onDelete'>
        <view class="record-column" style="width: 710rpx; height: 100%;" bind:tap="onTapRecordItem" data-index="{{index}}" data-record="{{records[index]}}">
          <view class="record-content">
            <text class="time">{{item.displayTime}}</text>
            <image class="icon" src="{{item.icon}}" mode="scaleToFill" />
            <view class="content-container">
              <text class="event">{{item.event}}</text>
              <text class="content">{{item.content}}</text>
            </view>

            <view class="spaceing"></view>
            <image class="img-display" wx:if="{{item.content}}" src="../../images/diary.svg" mode="scaleToFill" lazy-load></image>
            <image class="img-display" data-index="{{index}}" wx:if="{{item.imgSrc}}" src="../../images/view-img.svg" mode="scaleToFill" lazy-load show-menu-by-longpress catch:tap="displayImg"></image>
          </view>
          <view class="line"></view>
        </view>

      </swipe-item-view>

    </view>

  </view>


</view>

<image class="add-btn color-accent" bind:tap="recordEvent" src="../../images/add.svg"></image>